(function(e){function t(t){for(var r,c,o=t[0],i=t[1],s=t[2],d=0,f=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(u,c)&&u[c]&&f.push(u[c][0]),u[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var o=n[c];0!==u[o]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},c={index:0},u={index:0},a=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1e1e2960":"ec24dec3","chunk-4583dae2":"f85ed5d7","chunk-48154eea":"42e9783a","chunk-5d2852ee":"886b4594","chunk-5f1c84bd":"60468f54","chunk-7253ea48":"3c0f3906","chunk-74decf2c":"15d2ac34","chunk-8b7df82a":"9298030a","chunk-8f70c1ca":"729b53be","chunk-95455360":"b90efecf","chunk-bb64db8c":"7edb6fb6","chunk-cca9095a":"9871b4c9","chunk-d8f2b476":"8788a22c","chunk-f42981f0":"57696b73"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-1e1e2960":1,"chunk-4583dae2":1,"chunk-48154eea":1,"chunk-5d2852ee":1,"chunk-5f1c84bd":1,"chunk-7253ea48":1,"chunk-74decf2c":1,"chunk-8b7df82a":1,"chunk-8f70c1ca":1,"chunk-95455360":1,"chunk-bb64db8c":1,"chunk-cca9095a":1,"chunk-d8f2b476":1,"chunk-f42981f0":1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1e1e2960":"64c29a53","chunk-4583dae2":"4f39ab61","chunk-48154eea":"e2a00c4c","chunk-5d2852ee":"5529a1aa","chunk-5f1c84bd":"302b24f8","chunk-7253ea48":"56697406","chunk-74decf2c":"41acad6f","chunk-8b7df82a":"6c44e51a","chunk-8f70c1ca":"ae91e7fb","chunk-95455360":"7b7816ca","chunk-bb64db8c":"ca5310d5","chunk-cca9095a":"98128352","chunk-d8f2b476":"c60074c0","chunk-f42981f0":"475e142b"}[e]+".css",u=i.p+r,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var s=a[o],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===u))return t()}var f=document.getElementsByTagName("style");for(o=0;o<f.length;o++){s=f[o],d=s.getAttribute("data-href");if(d===r||d===u)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var r=t&&t.target&&t.target.src||u,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete c[e],l.parentNode.removeChild(l),n(a)},l.href=u;var p=document.getElementsByTagName("head")[0];p.appendChild(l)})).then((function(){c[e]=0})));var r=u[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=u[e]=[t,n]}));t.push(r[2]=a);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=o(e);var f=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=u[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",f.name="ChunkLoadError",f.type=r,f.request=c,n[1](f)}u[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var l=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("8a8a")},"3a10":function(e,t,n){},4279:function(e,t,n){"use strict";var r=n("53ca");n("d3b7"),n("159b"),n("b64b"),n("fb6a"),n("e9c4");t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(u,a){var o;if(e=e.toUpperCase(),o=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject,"GET"===e){var i="";Object.keys(n).forEach((function(e){i+=e+"="+n[e]+"&"})),i=i.slice(0,i.lastIndexOf("&")),t=i.length?t+"?"+i:t,o.open(e,t,c),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send()}else"POST"===e?(o.open(e,t,c),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(n))):a(new Error("错误"));o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(0===o.status||o.status>=200&&o.status<400){var e=o.response;"object"!==Object(r["a"])(e)&&(e=JSON.parse(o.response)),u(e)}else a(o)}}))}},"4ee2":function(e,t,n){},"8a8a":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("4de4"),n("d3b7");var r=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},u=[],a={name:"App"},o=a,i=n("2877"),s=Object(i["a"])(o,c,u,!1,null,null,null),d=s.exports,f=(n("3ca3"),n("ddb0"),n("8c4f")),l=n("2f62"),p=n("1da1"),h=(n("96cf"),n("b0c0"),n("4279")),m=n("a3be"),b=function(){return{hots:[],recentlyHots:[]}},k={},g={setHots:function(e,t){e.hots=t},addRecently:function(e,t){var n=e.recentlyHots.some((function(e){return e.name===t.name}));!n&&e.recentlyHots.unshift(t)},clearRecently:function(e){e.recentlyHots=[]},setRecentlyHots:function(e,t){e.recentlyHots=t}},v={getData:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Object(h["a"])("get",m["p"]);case 3:r=t.sent,n("setHots",r.data);case 5:case"end":return t.stop()}}),t)})))()}},y={namespaced:!0,state:b,getters:k,mutations:g,actions:v},w=function(){return{userToken:""}},O={setToken:function(e,t){e.userToken=t},delToken:function(e){e.userToken=""}},P={namespaced:!0,state:w,mutations:O},I=n("2909"),x=(n("d81d"),n("7db0"),n("99af"),function(){return{allItems:[],partItems:[],cartProducts:[],itemsId:[]}}),j={getProducts:function(e,t,n){if(n.products.all.length){var r,c=e.partItems.map((function(e){var t=e.id,r=e.quantity,c=n.products.all.find((function(e){return e.id===t}));return{id:c.id,img:c.pic_imgs,price:c.price1,title:c.name,quantity:r}}));return(r=e.cartProducts).push.apply(r,Object(I["a"])(c)),e.partItems=[],e.cartProducts}console.log("waiting...")},cartTotalPrice:function(e,t){if(e.cartProducts)return e.cartProducts.reduce((function(e,t){return e+t.price*t.quantity}),0);console.log("wating...")},checkouProduct:function(e){return function(t){return e.allItems.some((function(e){return e.id===t}))}}},T={pushProductToCart:function(e,t){e.partItems.push({id:t,quantity:1}),e.allItems.push({id:t,quantity:1})},setItemsId:function(e){e.itemsId=e.partItems.reduce((function(e,t){return[].concat(Object(I["a"])(e),[t.id])}),[])},clearPartItems:function(e){console.log("clear--"),e.partItems=[]},incrementItemQuantity:function(e,t){var n=e.cartProducts.find((function(e){return e.id===t}));n.quantity++},decrementItemQuantity:function(e,t){var n=e.cartProducts.find((function(e){return e.id===t}));n.quantity=n.quantity>=2?--n.quantity:1}},E={setItemsId:function(e){var t=e.commit;t("setItemsId")}},S={namespaced:!0,state:x,getters:j,actions:E,mutations:T},L=function(){return{all:[]}},q={setCartProducts:function(e,t){e.all=t}},_={setCartProducts:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,console.log("product--",t),n.t0=r,n.next=5,Object(h["a"])("post",m["e"],{items:t}).then((function(e){return e.data}));case 5:n.t1=n.sent,(0,n.t0)("setCartProducts",n.t1);case 7:case"end":return n.stop()}}),n)})))()}},C={namespaced:!0,state:L,actions:_,mutations:q};r["a"].use(l["a"]);var H=new l["a"].Store({modules:{types:y,user:P,cart:S,products:C}});r["a"].use(f["a"]),window.addEventListener("beforeunload",(function(){H.state.user.userToken&&window.sessionStorage.setItem("token",H.state.user.userToken)})),sessionStorage.getItem("token")&&(H.commit("user/setToken",sessionStorage.getItem("token")),window.sessionStorage.removeItem("token"));var R=[{path:"/",component:d,children:[{path:"",component:function(){return n.e("chunk-f42981f0").then(n.bind(null,"a747"))},meta:{title:"首页"}},{path:"type",component:function(){return n.e("chunk-bb64db8c").then(n.bind(null,"951e"))},meta:{title:"产品分类"}},{path:"search",component:function(){return n.e("chunk-4583dae2").then(n.bind(null,"fc79"))},meta:{title:"产品搜索"}},{path:"results",component:function(){return n.e("chunk-48154eea").then(n.bind(null,"16b6"))},meta:{title:"搜索结果"}},{path:"login",component:function(){return n.e("chunk-1e1e2960").then(n.bind(null,"9137"))},meta:{title:"登录"},beforeEnter:function(e,t,n){H.state.user.userToken?n("/center"):n()}},{path:"about",component:function(){return n.e("chunk-95455360").then(n.bind(null,"40f5"))},meta:{title:"关于我们"}},{path:"recommend",component:function(){return n.e("chunk-cca9095a").then(n.bind(null,"172e"))}},{path:"discount",component:function(){return n.e("chunk-d8f2b476").then(n.bind(null,"96c5"))}},{path:"center",component:function(){return n.e("chunk-8b7df82a").then(n.bind(null,"82de"))},meta:{needLogin:!0,title:"个人中心"}},{path:"products",component:function(){return n.e("chunk-7253ea48").then(n.bind(null,"95cc"))}},{path:"addresslist",component:function(){return n.e("chunk-5d2852ee").then(n.bind(null,"f4b6"))},meta:{needLogin:!0,title:"地址列表"}},{path:"addaddr",component:function(){return n.e("chunk-8f70c1ca").then(n.bind(null,"c562"))},meta:{needLogin:!0,title:"新增地址"}},{path:"detail",component:function(){return n.e("chunk-74decf2c").then(n.bind(null,"eaad"))},meta:{title:"产品详情"}},{path:"cart",component:function(){return n.e("chunk-5f1c84bd").then(n.bind(null,"eb1b"))},meta:{needLogin:!0,title:"我的购物车"}}]}],M=new f["a"]({mode:"history",routes:R});M.beforeEach((function(e,t,n){e.meta.title&&(document.title=e.meta.title),e.matched.some((function(e){return e.meta.needLogin}))?H.state.user.userToken?n():n("/login"):n()}));var A=M,N=(n("b680"),n("fb6a"),n("ac1f"),n("5319"),/(\d{3})(?=\d)/g);function D(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var r=Math.abs(e).toFixed(n),c=n?r.slice(0,-1-n):r,u=c.length%3,a=u>0?c.slice(0,u)+(c.length>3?",":""):"",o=n?r.slice(-1-n):"",i=e<0?"-":"";return i+t+a+c.slice(u).replace(N,"$1,")+o}n("a034"),n("4ee2"),n("3a10");r["a"].config.productionTip=!1,r["a"].filter("currency",D),r["a"].prototype.imgUrl="http://localhost:3000/",new r["a"]({router:A,store:H,render:function(e){return e(d)}}).$mount("#app")},a034:function(e,t){(function(e,t){var n=e.documentElement,r="orientationchange"in window?"orientationchange":"resize",c=function(){var e=n.clientWidth;e&&(n.style.fontSize=e/320*20+"px")};e.addEventListener&&(t.addEventListener(r,c,!1),e.addEventListener("DOMContentLoaded",c,!1))})(document,window)},a3be:function(e,t,n){"use strict";n.d(t,"s",(function(){return r})),n.d(t,"t",(function(){return c})),n.d(t,"r",(function(){return u})),n.d(t,"h",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"k",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return l})),n.d(t,"o",(function(){return p})),n.d(t,"q",(function(){return h})),n.d(t,"p",(function(){return m})),n.d(t,"n",(function(){return b})),n.d(t,"d",(function(){return k})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return O}));var r="/api/user/login",c="/api/user/reg",u="/api/user/del",a="/api/index/navs",o="/api/index/bg",i="/api/index/recommends",s="/api/index/selection_types",d="/api/index/selection_items",f="/api/index/today_items",l="/api/index/today_types",p="/api/types/all",h="/api/types/items",m="/api/types/hots",b="/api/products/type",k="/api/addr/data",g="/api/addr",v="/api/addr/list",y="/api/addr/del",w="/api/detail",O="/api/cart"}});
//# sourceMappingURL=index.c54150ab.js.map